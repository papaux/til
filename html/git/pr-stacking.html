

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PR Stacking Flow &mdash; Geoffrey&#39;s TIL 0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/style.css?v=26f6988d" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8dde47fa"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PR Splitting Flow" href="pr-split-multiple-branches.html" />
    <link rel="prev" title="Oh My Zsh Aliases" href="oh-my-zsh-aliases.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Geoffrey's TIL
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ansible/_.html">Ansible</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications/_.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archlinux/_.html">ArchLinux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bash/_.html">Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cassandra/_.html">Cassandra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/_.html">C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-env/_.html">Development environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/_.html">Docker</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_.html">Git</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="blame.html">Blame</a></li>
<li class="toctree-l2"><a class="reference internal" href="branch.html">Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="branching-models.html">Branching Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="clean.html">Clean commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Config management</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-empty-branch.html">Create empty branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="diff.html">Diff</a></li>
<li class="toctree-l2"><a class="reference internal" href="eol.html">End of line</a></li>
<li class="toctree-l2"><a class="reference internal" href="fork.html">Fork</a></li>
<li class="toctree-l2"><a class="reference internal" href="gitignore.html">Gitignore syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="grep-in-logs.html">Grep in git logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="housekeeping.html">Housekeeping</a></li>
<li class="toctree-l2"><a class="reference internal" href="kdiff-as-mergetool.html">Kdiff as mergetool without auto merge</a></li>
<li class="toctree-l2"><a class="reference internal" href="log.html">Log commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="merge-tips.html">Merge tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="mirror-repository.html">Replicate a repository (branches+tags)</a></li>
<li class="toctree-l2"><a class="reference internal" href="oh-my-zsh-aliases.html">Oh My Zsh Aliases</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">PR Stacking Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="pr-split-multiple-branches.html">PR Splitting Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="rebase-squash.html">Rebase/Squash strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="rebase-with-conflicts.html">Rebase with conflicts</a></li>
<li class="toctree-l2"><a class="reference internal" href="remote.html">Remote Repositories Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="reset.html">Reset commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="retag.html">Re-tag</a></li>
<li class="toctree-l2"><a class="reference internal" href="revert.html">Revert commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="short-hash-from-full.html">Short hash from full</a></li>
<li class="toctree-l2"><a class="reference internal" href="stash-only-unstage.html">Stash only unstaged</a></li>
<li class="toctree-l2"><a class="reference internal" href="status.html">Status commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="tag.html">Tag commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="undo.html">Undo in git</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../go/_.html">Golang</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hadoop/_.html">Hadoop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../influxdb/_.html">InfluxDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iptables/_.html">iptables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/_.html">Java</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafka/_.html">Kafka</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes/_.html">Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kvm/_.html">KVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../links/_.html">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/_.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../markdown/_.html">Markdown</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/_.html">Media</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mysql/_.html">Mysql</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/_.html">Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nodejs/_.html">NodeJS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../obsidian/_.html">Obsidian</a></li>
<li class="toctree-l1"><a class="reference internal" href="../php/_.html">PHP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postgres/_.html">Postgres</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programming/_.html">Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/_.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../revealjs/_.html">Reveal.js</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rfc/_.html">RFCs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sphinx/_.html">Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scala/_.html">Scala</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tech-watch.html">Tech Watch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tmux/_.html">tmux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ubuntu-debian/_.html">Ubuntu / Debian</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vim/_.html">vim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vscode/_.html">VSCode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web/_.html">Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../windows/_.html">Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../yum/_.html">yum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zsh/_.html">zsh</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Geoffrey's TIL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="_.html">Git</a></li>
      <li class="breadcrumb-item active">PR Stacking Flow</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/git/pr-stacking.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pr-stacking-flow">
<h1>PR Stacking Flow<a class="headerlink" href="#pr-stacking-flow" title="Link to this heading">ÔÉÅ</a></h1>
<p>Imagine this scenario: you completed some changes, opened a PR to your main branch.
These changes are not merged yet, but you need to start a new task that builds on the previous changes.
Of course, you want to minimize the merge / rebase overhead.</p>
<p>One solution is to create a new branch based off your last feature branch, squash all the previous commits into one, and then start implementing your feature. That way, when the original changes are integrated into the main branch, you can simply rebase, removing the squashed commit.</p>
<ol class="arabic">
<li><p>Stash all uncommitted changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">stash</span>
</pre></div>
</div>
</li>
<li><p>Create a new branch (feature-2) based on the previous feature branch (feature-1):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">feature</span><span class="o">-</span><span class="mi">2</span> <span class="n">feature</span><span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p>Reset all the commits not yes in develop, keeping the actual file changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>git reset --soft $(git merge-base origin/develop HEAD)
</pre></div>
</div>
</li>
<li><p>Create a commit with a meaningful name. This commit will need to be erased from history when the original feature has been merged:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;DROP ME squash commits from previous feature branch&quot;</span>
</pre></div>
</div>
</li>
<li><p>Unstash:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">stash</span> <span class="n">apply</span>
</pre></div>
</div>
</li>
<li><p>Once the original changes have been merged to develop, rebase and delete the line with the DROP ME commit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">rebase</span> <span class="o">-</span><span class="n">i</span> <span class="n">origin</span><span class="o">/</span><span class="n">develop</span>

<span class="o">...</span>
<span class="n">drop</span> <span class="mi">0135</span><span class="n">a1609</span> <span class="n">DROP</span> <span class="n">ME</span> <span class="n">squash</span> <span class="n">commits</span> <span class="kn">from</span><span class="w"> </span><span class="nn">previous</span> <span class="n">feature</span> <span class="n">branch</span>
<span class="o">...</span>
</pre></div>
</div>
</li>
</ol>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="oh-my-zsh-aliases.html" class="btn btn-neutral float-left" title="Oh My Zsh Aliases" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pr-split-multiple-branches.html" class="btn btn-neutral float-right" title="PR Splitting Flow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, Geoffrey Papaux.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>